<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Note Gate â€” ECE Learning Game</title>
  <link rel="stylesheet" href="style.css?v=20251102v7">
</head>
<body>
  <div class="wrap">
    <div class="top-row">
      <h1 id="title">Note Gate â€” Circuit Puzzle</h1>
      <div class="lang-select">
        <label for="lang">Language</label>
        <select id="lang">
          <option value="en">English</option>
          <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
        </select>
      </div>
    </div>
    <p class="sub" id="subtitle">Adjust the resistors to make the gate open. Learns: voltage divider (Ohm's law).</p>

    <!-- Score Popup Animation Container -->
    <div id="scorePopupContainer"></div>

    <!-- Progress Bar -->
    <div class="progress-container">
      <div class="progress-label">
        <span>ğŸ® Level Progress</span>
        <span id="progressText">1/10</span>
      </div>
      <div class="progress-bar-bg">
        <div class="progress-bar-fill" id="progressBar" style="width:10%"></div>
        <div class="progress-shine"></div>
      </div>
    </div>

    <div class="panel">
      <div class="left">
        <div class="info">
          <div>Level: <strong><span id="level">1</span></strong></div>
          <div>Score: <strong><span id="score">0</span></strong> 
            <span id="comboIndicator" class="combo-indicator" style="display:none"></span>
          </div>
          <div>High Score: <strong><span id="highscore">0</span></strong></div>
          <div>Timer: <strong><span id="timer">0</span></strong> s
            <span id="streakBonus" class="streak-bonus" style="display:none">ğŸ”¥ Streak!</span>
          </div>
          <div>Vin: <span id="vin">5.00</span> V</div>
          <div>Target Vout: <span id="target">2.50</span> V</div>
          <div>Tolerance: Â±<span id="tol">0.25</span> V</div>
          <div>Vout: <span id="vout">0.00</span> V</div>
        </div>

        <!-- Power-ups Bar -->
        <div class="powerups-bar" id="powerupsBar" style="display:none">
          <div class="powerup-title">âš¡ Power-Ups</div>
          <button class="powerup-btn" id="hintPowerup" data-cost="50">
            <span class="powerup-icon">ğŸ’¡</span>
            <span class="powerup-name">Hint</span>
            <span class="powerup-cost">50pts</span>
          </button>
          <button class="powerup-btn" id="timePowerup" data-cost="100">
            <span class="powerup-icon">â°</span>
            <span class="powerup-name">+30s</span>
            <span class="powerup-cost">100pts</span>
          </button>
          <button class="powerup-btn" id="skipPowerup" data-cost="200">
            <span class="powerup-icon">â­ï¸</span>
            <span class="powerup-name">Skip</span>
            <span class="powerup-cost">200pts</span>
          </button>
        </div>

        <!-- Drag-and-Drop Component Zone (Option A) -->
        <div id="dragDropZone" class="drag-drop-zone" style="display:none">
          <div class="component-palette">
            <div class="palette-title">ğŸ“¦ Drag Components (or enter values below)</div>
            <!-- Resistors for analog levels -->
            <div class="component-item resistor-item" draggable="true" data-type="resistor" data-value="1000">
              <span class="emoji">ğŸ”§</span> 1kÎ©
            </div>
            <div class="component-item resistor-item" draggable="true" data-type="resistor" data-value="2200">
              <span class="emoji">ğŸ”§</span> 2.2kÎ©
            </div>
            <div class="component-item resistor-item" draggable="true" data-type="resistor" data-value="3300">
              <span class="emoji">ğŸ”§</span> 3.3kÎ©
            </div>
            <div class="component-item resistor-item" draggable="true" data-type="resistor" data-value="4700">
              <span class="emoji">ğŸ”§</span> 4.7kÎ©
            </div>
            <div class="component-item resistor-item" draggable="true" data-type="resistor" data-value="10000">
              <span class="emoji">ğŸ”§</span> 10kÎ©
            </div>
            <!-- Logic Gates for digital levels -->
            <div class="component-item gate-item" draggable="true" data-type="gate" data-gate="and">
              <span class="emoji">ğŸ”·</span> AND
            </div>
            <div class="component-item gate-item" draggable="true" data-type="gate" data-gate="or">
              <span class="emoji">ğŸ”¶</span> OR
            </div>
            <div class="component-item gate-item" draggable="true" data-type="gate" data-gate="not">
              <span class="emoji">ï¿½</span> NOT
            </div>
            <div class="component-item gate-item" draggable="true" data-type="gate" data-gate="nand">
              <span class="emoji">ğŸ”¹</span> NAND
            </div>
            <div class="component-item gate-item" draggable="true" data-type="gate" data-gate="nor">
              <span class="emoji">ï¿½</span> NOR
            </div>
            <div class="component-item gate-item" draggable="true" data-type="gate" data-gate="xor">
              <span class="emoji">â­•</span> XOR
            </div>
          </div>
          
          <!-- Manual Input Section -->
          <div class="manual-input-section resistor-slot">
            <div class="manual-input-title">âœï¸ Or Enter Custom Values:</div>
            <div class="manual-inputs">
              <div class="manual-input-group">
                <label for="manualR1">R1 (Î©):</label>
                <input type="number" id="manualR1" class="manual-input" min="100" max="1000000" step="100" placeholder="e.g. 3300">
                <button id="applyR1" class="apply-btn">âœ“ Apply</button>
              </div>
              <div class="manual-input-group">
                <label for="manualR2">R2 (Î©):</label>
                <input type="number" id="manualR2" class="manual-input" min="100" max="1000000" step="100" placeholder="e.g. 4700">
                <button id="applyR2" class="apply-btn">âœ“ Apply</button>
              </div>
            </div>
          </div>
          
          <div class="drop-zones">
            <!-- Resistor slots for analog levels -->
            <div class="drop-slot resistor-slot" data-slot="r1">
              <span class="slot-label">R1 Slot</span>
              <div class="drop-target" id="dropR1">Drop Here</div>
            </div>
            <div class="drop-slot resistor-slot" data-slot="r2">
              <span class="slot-label">R2 Slot</span>
              <div class="drop-target" id="dropR2">Drop Here</div>
            </div>
            <!-- Gate slot for digital levels -->
            <div class="drop-slot gate-slot" data-slot="gate">
              <span class="slot-label">ğŸšª Gate Slot</span>
              <div class="drop-target" id="dropGate">Drop Gate Here</div>
            </div>
          </div>
          <div class="reset-controls">
            <button id="resetDragDrop" class="reset-btn">ğŸ”„ Reset Choices</button>
          </div>
        </div>

        <!-- Physical Switch Controls (Option B) -->
        <div id="switchControls" class="switch-controls" style="display:none">
          <div class="switch-box">
            <label class="switch-label">Input A</label>
            <div class="physical-switch" id="switchA">
              <div class="switch-lever"></div>
              <div class="switch-base">
                <span class="switch-state">LOW</span>
              </div>
            </div>
          </div>
          <div class="switch-box">
            <label class="switch-label">Input B</label>
            <div class="physical-switch" id="switchB">
              <div class="switch-lever"></div>
              <div class="switch-base">
                <span class="switch-state">LOW</span>
              </div>
            </div>
          </div>
          <div class="reset-controls">
            <button id="resetSwitches" class="reset-btn">ğŸ”„ Reset All Switches</button>
          </div>
        </div>

        <!-- Puzzle Piece Circuit Builder (Option C) -->
        <div id="puzzleBuilder" class="puzzle-builder" style="display:none">
          <div class="puzzle-canvas">
            <svg id="circuitSvg" width="100%" height="300" viewBox="0 0 400 300">
              <!-- Circuit connection lines -->
              <line x1="50" y1="100" x2="150" y2="100" stroke="#ccc" stroke-width="3" />
              <line x1="50" y1="200" x2="150" y2="200" stroke="#ccc" stroke-width="3" />
              <line x1="250" y1="150" x2="350" y2="150" stroke="#ccc" stroke-width="3" />
              <!-- Puzzle piece slots -->
              <g id="pieceSlot1" class="piece-slot" data-slot="input1">
                <circle cx="50" cy="100" r="20" fill="#fff" stroke="#667eea" stroke-width="3" />
                <text x="50" y="105" text-anchor="middle" font-size="16" fill="#667eea">A</text>
              </g>
              <g id="pieceSlot2" class="piece-slot" data-slot="input2">
                <circle cx="50" cy="200" r="20" fill="#fff" stroke="#667eea" stroke-width="3" />
                <text x="50" y="205" text-anchor="middle" font-size="16" fill="#667eea">B</text>
              </g>
              <g id="gateSlot" class="piece-slot" data-slot="gate">
                <rect x="150" y="100" width="100" height="100" rx="10" fill="#ffe5b4" stroke="#ff9800" stroke-width="3" />
                <text x="200" y="155" text-anchor="middle" font-size="20" fill="#ff9800">?</text>
              </g>
              <g id="outputSlot" class="piece-slot" data-slot="output">
                <circle cx="350" cy="150" r="25" fill="#fff" stroke="#4caf50" stroke-width="3" />
                <text x="350" y="155" text-anchor="middle" font-size="16" fill="#4caf50">OUT</text>
              </g>
            </svg>
          </div>
          <div class="puzzle-pieces">
            <div class="puzzle-piece" draggable="true" data-piece="and">
              <span class="piece-icon">âˆ§</span>
              <span class="piece-name">AND</span>
            </div>
            <div class="puzzle-piece" draggable="true" data-piece="or">
              <span class="piece-icon">âˆ¨</span>
              <span class="piece-name">OR</span>
            </div>
            <div class="puzzle-piece" draggable="true" data-piece="xor">
              <span class="piece-icon">âŠ•</span>
              <span class="piece-name">XOR</span>
            </div>
          </div>
          <div class="reset-controls">
            <button id="resetPuzzle" class="reset-btn">ğŸ”„ Clear Circuit & Reset</button>
          </div>
        </div>

        <!-- Wire Connection Puzzle (Option D) -->
        <div id="wireConnectPuzzle" class="wire-puzzle" style="display:none">
          <div class="puzzle-instruction">ğŸ”Œ Connect the wires to complete the circuit!</div>
          <svg id="wireSvg" width="100%" height="280" viewBox="0 0 450 280">
            <!-- Left terminals -->
            <g class="terminal" id="termL1" data-terminal="L1">
              <circle cx="50" cy="70" r="15" fill="#ef4444" stroke="#991b1b" stroke-width="3" />
              <text x="50" y="75" text-anchor="middle" font-size="14" fill="#fff">+</text>
            </g>
            <g class="terminal" id="termL2" data-terminal="L2">
              <circle cx="50" cy="140" r="15" fill="#3b82f6" stroke="#1e40af" stroke-width="3" />
              <text x="50" y="145" text-anchor="middle" font-size="14" fill="#fff">A</text>
            </g>
            <g class="terminal" id="termL3" data-terminal="L3">
              <circle cx="50" cy="210" r="15" fill="#10b981" stroke="#065f46" stroke-width="3" />
              <text x="50" y="215" text-anchor="middle" font-size="14" fill="#fff">B</text>
            </g>
            <!-- Right terminals -->
            <g class="terminal" id="termR1" data-terminal="R1">
              <circle cx="400" cy="70" r="15" fill="#8b5cf6" stroke="#5b21b6" stroke-width="3" />
              <text x="400" y="75" text-anchor="middle" font-size="12" fill="#fff">O1</text>
            </g>
            <g class="terminal" id="termR2" data-terminal="R2">
              <circle cx="400" cy="140" r="15" fill="#f59e0b" stroke="#92400e" stroke-width="3" />
              <text x="400" y="145" text-anchor="middle" font-size="12" fill="#fff">O2</text>
            </g>
            <g class="terminal" id="termR3" data-terminal="R3">
              <circle cx="400" cy="210" r="15" fill="#ec4899" stroke="#9f1239" stroke-width="3" />
              <text x="400" y="215" text-anchor="middle" font-size="12" fill="#fff">O3</text>
            </g>
            <!-- Wire drawing area -->
            <g id="wireDrawingArea"></g>
          </svg>
          <div class="wire-feedback" id="wireFeedback"></div>
          <div class="reset-controls">
            <button id="resetWires" class="reset-btn">ğŸ”„ Clear All Wires</button>
          </div>
        </div>

        <!-- Component Matching Puzzle (Option E) -->
        <div id="componentMatch" class="component-match-puzzle" style="display:none">
          <div class="puzzle-instruction">ğŸ¯ Match components with their symbols!</div>
          <div class="matching-container">
            <div class="match-column">
              <div class="match-title">Components</div>
              <div class="match-item draggable" draggable="true" data-id="resistor">
                <span class="match-emoji">ğŸ”§</span>
                <span class="match-text">Resistor</span>
              </div>
              <div class="match-item draggable" draggable="true" data-id="capacitor">
                <span class="match-emoji">âš¡</span>
                <span class="match-text">Capacitor</span>
              </div>
              <div class="match-item draggable" draggable="true" data-id="diode">
                <span class="match-emoji">â¡ï¸</span>
                <span class="match-text">Diode</span>
              </div>
              <div class="match-item draggable" draggable="true" data-id="transistor">
                <span class="match-emoji">ğŸ”º</span>
                <span class="match-text">Transistor</span>
              </div>
            </div>
            <div class="match-column">
              <div class="match-title">Symbols</div>
              <div class="match-slot" data-answer="resistor">
                <span class="symbol-text">â”â”â•±â•²â•±â•²â”â”</span>
              </div>
              <div class="match-slot" data-answer="capacitor">
                <span class="symbol-text">â”â”â”ƒâ”ƒâ”â”</span>
              </div>
              <div class="match-slot" data-answer="diode">
                <span class="symbol-text">â”â”â–º|â”â”</span>
              </div>
              <div class="match-slot" data-answer="transistor">
                <span class="symbol-text">â”â”â–·|â”â”</span>
              </div>
            </div>
          </div>
          <div class="reset-controls">
            <button id="resetMatch" class="reset-btn">ğŸ”„ Reset Matching</button>
          </div>
        </div>

        <!-- Pattern Recognition Puzzle (Option F) -->
        <div id="patternPuzzle" class="pattern-puzzle" style="display:none">
          <div class="puzzle-instruction">ğŸ§© Complete the sequence!</div>
          <div class="pattern-display">
            <div class="pattern-row">
              <div class="pattern-cell filled" data-value="1">1</div>
              <div class="pattern-cell filled" data-value="0">0</div>
              <div class="pattern-cell filled" data-value="1">1</div>
              <div class="pattern-cell empty" data-value="?">?</div>
            </div>
          </div>
          <div class="pattern-options">
            <button class="pattern-option" data-answer="0">0</button>
            <button class="pattern-option" data-answer="1">1</button>
          </div>
          <div class="pattern-feedback" id="patternFeedback"></div>
        </div>

        <!-- Standard Controls (sliders/toggles) -->
        <div class="controls" id="standardControls">
          <label>R1 (Î©) <input id="r1" type="range" min="10" max="10000" value="1000"></label>
          <div class="value"><span id="r1val">1000</span> Î©</div>

          <label>R2 (Î©) <input id="r2" type="range" min="10" max="10000" value="1000"></label>
          <div class="value"> <span id="r2val">1000</span> Î©</div>
        </div>

        <div class="buttons">
          <button id="randomize">New Puzzle</button>
          <button id="hint">Hint</button>
          <button id="nextLevel" style="display:none">Next Level</button>
        </div>
      </div>

      <div class="right">
        <div id="gate" class="gate closed">
          <div class="door"></div>
          <div class="lamp" id="lamp"></div>
        </div>
        <div class="caption" id="caption">Gate will open when Vout â‰ˆ target</div>
        <div id="instructions" class="instructions">
          <strong id="objectiveStrong">Objective</strong>
          <div id="levelDesc">Match the target voltage using R1 and R2.</div>
        </div>
        <div class="controls-row" style="margin-top:12px; width:100%; text-align:center">
          <label style="font-size:13px;margin-right:8px" id="soundLabel">Sound</label>
          <button id="soundToggle">On</button>
        </div>
      </div>
    </div>

    <!-- Confetti canvas overlay -->
    <canvas id="confetti-canvas" aria-hidden="true"></canvas>

    <!-- Quiz Modal - Unlock Levels by Answering Questions -->
    <div id="quizModal" class="modal" style="display:none">
      <div class="modal-content quiz-content">
        <h3 id="quizTitle">ğŸ“ ECE Quiz - Unlock Level <span id="quizLevelNum"></span></h3>
        <div class="quiz-info">
          <p id="quizInstruction">Answer the question correctly to unlock the next level!</p>
        </div>
        <div class="quiz-question">
          <div class="question-text" id="questionText"></div>
          <div class="quiz-options" id="quizOptions"></div>
        </div>
        <div class="quiz-feedback" id="quizFeedback" style="display:none"></div>
        <div class="quiz-controls">
          <button id="quizSubmit" class="quiz-btn">âœ… Submit Answer</button>
          <button id="quizRetry" class="quiz-btn retry-btn" style="display:none">ğŸ”„ Try Again</button>
        </div>
      </div>
    </div>

    <!-- Match-3 unlock modal -->
    <div id="matchModal" class="modal" style="display:none">
      <div class="modal-content">
        <h3 id="matchTitle">Mini Puzzle â€” Unlock Level</h3>
        <div class="match-info">Score: <span id="matchScore">0</span> &nbsp; Moves: <span id="matchMoves">0</span> &nbsp; Target: <span id="matchTarget">50</span></div>
        <div id="matchGrid" class="match-grid"></div>
        <div class="match-controls">
          <button id="matchReset">Shuffle</button>
          <button id="matchClose" disabled>Unlock</button>
        </div>
        <small id="matchHelp">Swap adjacent tiles to make matches of 3 or more. Reach the target score to unlock the level.</small>
      </div>
    </div>

    <div id="toast" class="toast" style="display:none"></div>

    <div id="achievements" class="achievements">
      <strong id="achHeader">Achievements</strong>
      <ul id="achList"></ul>
    </div>

    <footer>
      <small id="footerText">Designed for quick ECE learning â€” Ohm's law & voltage dividers.</small>
    </footer>
  </div>

  <script src="simulation.js?v=20251102v7"></script>
  <script src="main.js?v=20251102v7"></script>
</body>
</html>


